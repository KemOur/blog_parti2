# Modern PHP Composer blog

## Install

```
$ composer install
```

`.env` file is automatically generated by composer on installation. Enter your database credentials in this file.

## Usage

```
$ composer run serve
```

---

## Objectif

Cr√©er un blog MVC avec Composer.

## Interface

- Vous devez cr√©er une page d'accueil `GET /`
- Vous devez cr√©er une interface correcte (vous pouvez utiliser le framework de votre choix)
- Vous devez afficher des notifications d'actions (par exemple, une notification qui confirme la cr√©ation d'un article, sa suppression, sa modification...)
- Vous devez afficher des notifications en cas d'erreurs (voir liste des cas d'erreurs plus bas)

## Base de donn√©es

Vous devez cr√©er une table `posts` qui contient les champs suivants en utilisant [Phinx](https://book.cakephp.org/phinx/0/en/index.html) pour g√©r√©r le sch√©ma de la base de donn√©es avec des migrations :

| Nom        | Type         | Description                                                                                        |
| ---------- | ------------ | -------------------------------------------------------------------------------------------------- |
| id         | int          | Identifiant unique de l'utilisateur, g√©n√©r√© automatiquement lors de l‚Äôinsertion                    |
| created_at | timestamp    | Date et heure √† laquelle l'article a √©t√© cr√©√©, g√©n√©r√© automatiquement lors de l‚Äôinsertion          |
| updated_at | timestamp    | Date et heure √† laquelle l'article a √©t√© mis √† jour, g√©n√©r√© automatiquement lors de la mise √† jour |
| title      | varchar(255) | Titre de l'article                                                                                 |
| body       | text         | Contenu de l'article                                                                               |

## Routes des articles

| Methode | URL                   | Action              | Description                                                   |
| ------- | --------------------- | ------------------- | ------------------------------------------------------------- |
| GET     | `/articles`           | `postIndex()`       | Affichage de tous les articles                                |
| GET     | `/articles/{id}`      | `postShow($id)`     | Affichage d'un article _(o√π `{id}` est l'id de l'article)_    |
| GET     | `/articles/create`    | `postCreate()`      | Affichage du formulaire de cr√©ation d'un article              |
| POST    | `/articles`           | `postStore()`       | Cr√©ation d'un article                                         |
| GET     | `/articles/{id}/edit` | `postEdit($id)`     | Affichage du formulaire de modification d'un article          |
| PUT     | `/articles/{id}`      | `postUpdate($post)` | Modification d'un article _(o√π `{id}` est l'id de l'article)_ |
| DELETE  | `/articles/{id}`      | `postDestroy($id)`  | Suppression d'un article (o√π `{id}` est l'id de l'article)    |

## Cas d'erreurs

| Fonctionnalit√©            | Description                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Affichage d'un article    | - V√©rifier que le query parameter `{id}` existe et soit un entier, sinon renvoyer un erreur 400<br />- V√©rifier que l'article correspondant au query parameter `{id}` existe, sinon renvoyer une erreur 404                                                                                                                                                                                                                             |
| Cr√©ation d'un article     | - V√©rifier que les champs `title` et `body` existent et soient remplis, sinon renvoyer l'utilisateur sur le formulaire de cr√©ation en gardant les informations qu'il a rentr√© et en affichant un message d'erreur                                                                                                                                                                                                                       |
| Modification d'un article | - V√©rifier que le query parameter `{id}` existe et soit un entier, sinon renvoyer un erreur 400<br />- V√©rifier que l'`{id}` pass√© en param√®tre corresponde bien √† un article, sinon renvoyer une erreur 404<br />- V√©rifier que les champs `title` et `body` existent et soient remplis, sinon renvoyer l'utilisateur sur le formulaire de modification en gardant les informations qu'il a rentr√© et en affichant un message d'erreur |
| Suppression d'un article  | - V√©rifier que le query parameter `{id}` existe et soit un entier, sinon renvoyer un erreur 400<br />- V√©rifier que l'`{id}` pass√© en param√®tre corresponde bien √† un article, sinon renvoyer une erreur 404<br />                                                                                                                                                                                                                      |

## Contraintes

- L'affichage d'un article doit afficher toutes les dates au format relatif ("Il y'a 3 jours") en utilisant [Carbon](https://carbon.nesbot.com/docs/). Les dates sur les autres pages doivent √™tre affich√©es au format fran√ßais üá´üá∑
- Les donn√©es des articles doivent se trouver dans une base de donn√©es MySQL dont les param√®tres de connexion sont stock√©s dans un ficher `.env` gr√¢ce √† [PHP Dotenv](https://github.com/vlucas/phpdotenv)
- Gestion des erreurs avec [Whoops](https://github.com/filp/whoops) sur l'environnement local de d√©veloppement uniquement
- Utiliser un syst√®me de confirmation d'action (notification) et de "old input" bas√© sur les messages de session flash
- L'√©criture des articles utilise le format Markdown gr√¢ce √† [Parsedown](https://parsedown.org/)
- Cr√©er une route `GET /generate` qui permet de g√©n√©rer un certain nombre de "faux articles" avec [Faker](https://github.com/fzaninotto/Faker) pour remplir la base de donn√©es de developpement
- Utiliser le principe de method override pour utiliser les m√©thodes HTTP `PUT` et `DELETE` via le navigateur au lieu de `POST` pour respectivement la modification `postUpdate($post)` et la suppression d'un article `postDestroy($id)`
- Utiliser [Fast Route](https://github.com/nikic/FastRoute) comme router
- Utiliser [Plates](https://platesphp.com/) pour le syst√®me de template
- Utiliser un fichier de configuration en utilisant [Config](https://github.com/hassankhan/config)
- Utiliser le package [Respect/Validation](https://github.com/Respect/Validation) pour la validation de vos formulaires
